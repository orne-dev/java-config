<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/configurable.md at 2025-11-10
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Configurable components – Orne Config</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.1.0.min.js"></script>
<script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.esm.min.mjs';
      mermaid.init({ startOnLoad: true });
      document.querySelectorAll('.language-mermaid').forEach(s => s.parentElement.classList.remove("prettyprint"));
      await mermaid.run({
        querySelector: '.language-mermaid',
        suppressErrors: true,
      });
    </script>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/orne-dev/java-config" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-11-10<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Introduction</a></li>
    <li><a href="config.html">API</a></li>
    <li><a href="setup.html">Setup</a></li>
    <li class="active"><a>Configurable components</a></li>
    <li><a href="spring.html">Spring integration</a></li>
    <li><a href="commons.html">Apache Commons integration</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Configurable_components"></a>
<h1>Configurable components</h1>
<p>The library provides the <code>Configurable</code> interface that can be implemented by
components that require configuration after instantiation.</p>
<p>The interface defines two methods with default implementations,
<code>configure</code>, that receives a <code>Config</code> object for programmatic
configuration, and <code>isConfigured</code>, that can return <code>true</code> if the
component has been configured to prevent re-configuration.</p>

<pre class="prettyprint"><code class="language-java">class MyComponent implements Configurable {

    private String host;
    private int port;
    private boolean configured = false;

    @Override
    public void configure(Config config) {
        this.host = config.get(&quot;host&quot;, &quot;localhost&quot;);
        this.port = config.getInteger(&quot;port&quot;, 8080);
        this.configured = true;
    }

    @Override
    public boolean isConfigured() {
        return this.configured;
    }
}
</code></pre>
<p>The class <code>Configurer</code> is the responsible for applying a <code>Config</code> to
the <code>Configurable</code> components, and is capable of configuring automatically
properties annotated with <code>@ConfigurableProperty</code>.
Nested <code>Configurable</code> beans are not configured by default.</p>
<p>Example:</p>

<pre class="prettyprint"><code class="language-java">class MyComponent implements Configurable {

    @ConfigurableProperty(&quot;host&quot;)
    private String host;
    @ConfigurableProperty(&quot;port&quot;)
    private int port;
    // Does not require override configure() method
}
</code></pre>
<p><strong>Note:</strong> The configurable bean must have accesible setters for the
annotated properties, or the properties must be public.</p><section><a id="Customization_of_components_configuration"></a>
<h2>Customization of components configuration</h2>
<p>Components can customize the configuration process with the annotations
<code>@PreferredConfig</code> and <code>@ConfigurationOptions</code>, that can be applied to the
class.</p><section><a id="Preferred_configurations"></a>
<h3>Preferred configurations</h3>
<p>The <code>PreferredConfig</code> annotation can be used to specify one or more
preferred <code>Config</code> subtypes for the component.
When the <code>Configurer</code> configures the component, it will try to find
a <code>Config</code> instance of the preferred types in the order specified,
and use the first one found to configure the component.
If none of the preferred configurations is found, the default
configuration provided to the <code>Configurer</code> will be used, unless
the <code>fallbackToDefaultConfig</code> option is set to <code>false</code> in the
annotation.</p>
<p>This allows libraries to provide specific <code>Config</code> subtypes for their
configurable components, while still allowing the application to
configure them using the default configuration.
The application that uses the library can use it's default configuration
or provide the library specific configuration to configure the
library components.</p>
<p>Components can convert to the specific <code>Config</code> subtype using the
<code>Config.as(Class&lt;T&gt;)</code> method in the <code>configure</code> method.</p>
<p>Example:</p>

<pre class="prettyprint"><code class="language-java">interface MySuperConfig extends Config {}
interface MyConfig extends MySuperConfig {

    final String HOST_PROP = &quot;host&quot;;
    final String PORT_PROP = &quot;port&quot;;

    default String getHost() {
        return get(HOST_PROP, &quot;localhost&quot;);
    }

    default int getPort() {
        return getInteger(PORT_PROP, 8080);
    }
}

@PreferredConfig({ MyConfig.class, MySuperConfig.class })
class MyComponent implements Configurable {

    private String host;
    private int port;

    @Override
    public void configure(Config config) {
        MyConfig myConfig = config.as(MyConfig.class);
        this.host = myConfig.getHost();
        this.port = myConfig.getPort();
   }
}
</code></pre>
<p>This is useful for external libraries components, that can
be configured using the library custom <code>Config</code> subtypes,
providing specific configuration for the library,
or fallback to application's default configuration.</p></section><section><a id="Configuration_options"></a>
<h3>Configuration options</h3>
<p>The <code>ConfigurationOptions</code> annotation allows to customize the configuration
process for the component.</p>
<p>By default, the <code>Configurer</code> will configure properties annotated
with <code>@ConfigurableProperty</code>.
As properties are only configured if annotated with
<code>@ConfigurableProperty</code>, setting <code>configureProperties</code> to <code>false</code> can be
used to skip the properties configuration step, for example in components
extending other configurable components that already configure their
properties.</p>
<p>Example:</p>

<pre class="prettyprint"><code class="language-java">class BaseComponent implements Configurable {
    ...
    @ConfigurableProperty(&quot;host&quot;)
    private String host;
    ...
}
@ConfigurationOptions(configureProperties = false)
class MyExtendedComponent extends BaseComponent {
    ...
    @Override
    public void configure(Config config) {
        ...
        setHost(...);
        ...
    }
    ...
}
</code></pre>
<p>Nested <code>Configurable</code> beans are not configured by default, as independent
configuration is expected for them.
This can be overriden setting <code>configureNestedBeans</code> to <code>true</code>, to enable
automatic configuration of nested beans.</p>
<p>Example:</p>

<pre class="prettyprint"><code class="language-java">class NestedComponent implements Configurable {
    ...
}
@ConfigurationOptions(configureNestedBeans = true)
class MyComponent implements Configurable {
    ...
    private NestedComponent nestedComponent = new NestedComponent();
    ...
}
</code></pre>
<p><strong>Note:</strong> The configurable bean must have accesible getters for the
nested configurable beans, or the property must be public.</p></section></section><section><a id="Configurer_programmatic_usage"></a>
<h2>Configurer programmatic usage</h2>
<p>The <code>Configurer</code> can be created programmatically using the static
<code>Configurer.fromProvider</code> method, that expectes a <code>ConfigProvider</code>
with a mandatory default configuration and optional alternative configurations:</p>

<pre class="prettyprint"><code class="language-java">Config config = ...;
AltConfig altConfig = ...;
Configurer configurer = Configurer.fromProvider(
        ConfigProvider.builder(config)
            .addConfig(altConfig)
            .build());

Configurable component = ...;
configurer.configure(component);
</code></pre></section><section><a id="Spring_integration"></a>
<h2>Spring integration</h2>
<p>Usage of configurable beans in Spring Framework is fully supported.
See the <a href="spring.html">Spring integration</a> document for details.</p></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2019–2025
<a href="https://github.com/orne-dev">Orne Developments</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>